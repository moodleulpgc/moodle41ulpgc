{"version":3,"file":"notice_form.min.js","sources":["../src/notice_form.js"],"sourcesContent":["/**\n * User interaction with notice\n * @author     Jwalit Shah <jwalitshah@catalyst-au.net>\n * @copyright  Catalyst IT\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([], function() {\n\n    /**\n     * CSS selectors\n     * @type {object}\n     */\n    var SELECTORS = {\n        RESET_NUMBER_SELECT: 'id_resetinterval_number',\n        RESET_UNIT_SELECT: 'id_resetinterval_timeunit',\n        REQACK_SELECT: 'id_reqack',\n        AUDIENCE_SELECT: 'id_audience',\n        REQCOURSE_SELECT: 'id_reqcourse'\n    };\n\n    /**\n     * Default values for the select when course completion is chosen\n     * @type {object}\n     */\n    var DEFAULT_VALUES = {\n        RESET_NUMBER_SELECT: 0,\n        RESET_UNIT_SELECT: \"60\",\n        REQACK_SELECT: \"0\",\n        AUDIENCE_SELECT: 0,\n    };\n\n    /**\n     * Initialize the sitenotice edit form.\n     * If its a course completion site notice, disable other fields\n     */\n    var init = function() {\n\n        var reqcourseSelect = document.getElementById(SELECTORS.REQCOURSE_SELECT);\n        var resetNumberSelect = document.getElementById(SELECTORS.RESET_NUMBER_SELECT);\n        var resetUnitSelect = document.getElementById(SELECTORS.RESET_UNIT_SELECT);\n        var reqackSelect = document.getElementById(SELECTORS.REQACK_SELECT);\n        var audienceSelect = document.getElementById(SELECTORS.AUDIENCE_SELECT);\n\n        if (reqcourseSelect.value > 0) {\n            resetNumberSelect.value = DEFAULT_VALUES.RESET_NUMBER_SELECT;\n            resetNumberSelect.disabled = true;\n            resetUnitSelect.value = DEFAULT_VALUES.RESET_UNIT_SELECT;\n            resetUnitSelect.disabled = true;\n            reqackSelect.value = DEFAULT_VALUES.REQACK_SELECT;\n            reqackSelect.disabled = true;\n            audienceSelect.value = DEFAULT_VALUES.AUDIENCE_SELECT;\n            audienceSelect.disabled = true;\n        }\n        // Add the onchange event as well.\n        reqcourseSelect.addEventListener('change', function(event) {\n\n            if (event.target.value > 0) {\n                // If course completion is selected, disable other methods.\n                resetNumberSelect.value = DEFAULT_VALUES.RESET_NUMBER_SELECT;\n                resetNumberSelect.disabled = true;\n                resetUnitSelect.value = DEFAULT_VALUES.RESET_UNIT_SELECT;\n                resetUnitSelect.disabled = true;\n                reqackSelect.value = DEFAULT_VALUES.REQACK_SELECT;\n                reqackSelect.disabled = true;\n                audienceSelect.value = DEFAULT_VALUES.AUDIENCE_SELECT;\n                audienceSelect.disabled = true;\n            } else {\n                // Else enable other methods.\n                resetNumberSelect.disabled = false;\n                resetUnitSelect.disabled = false;\n                reqackSelect.disabled = false;\n                audienceSelect.disabled = false;\n            }\n        });\n    };\n\n    return {\n        init : init\n    };\n});"],"names":["define","SELECTORS","DEFAULT_VALUES","init","reqcourseSelect","document","getElementById","resetNumberSelect","resetUnitSelect","reqackSelect","audienceSelect","value","disabled","addEventListener","event","target"],"mappings":";;;;;;AAOAA,sCAAO,IAAI,eAMHC,8BACqB,0BADrBA,4BAEmB,4BAFnBA,wBAGe,YAHfA,0BAIiB,cAJjBA,2BAKkB,eAOlBC,mCACqB,EADrBA,iCAEmB,KAFnBA,6BAGe,IAHfA,+BAIiB,QAgDd,CACHC,KA1CO,eAEHC,gBAAkBC,SAASC,eAAeL,4BAC1CM,kBAAoBF,SAASC,eAAeL,+BAC5CO,gBAAkBH,SAASC,eAAeL,6BAC1CQ,aAAeJ,SAASC,eAAeL,yBACvCS,eAAiBL,SAASC,eAAeL,2BAEzCG,gBAAgBO,MAAQ,IACxBJ,kBAAkBI,MAAQT,mCAC1BK,kBAAkBK,UAAW,EAC7BJ,gBAAgBG,MAAQT,iCACxBM,gBAAgBI,UAAW,EAC3BH,aAAaE,MAAQT,6BACrBO,aAAaG,UAAW,EACxBF,eAAeC,MAAQT,+BACvBQ,eAAeE,UAAW,GAG9BR,gBAAgBS,iBAAiB,UAAU,SAASC,OAE5CA,MAAMC,OAAOJ,MAAQ,GAErBJ,kBAAkBI,MAAQT,mCAC1BK,kBAAkBK,UAAW,EAC7BJ,gBAAgBG,MAAQT,iCACxBM,gBAAgBI,UAAW,EAC3BH,aAAaE,MAAQT,6BACrBO,aAAaG,UAAW,EACxBF,eAAeC,MAAQT,+BACvBQ,eAAeE,UAAW,IAG1BL,kBAAkBK,UAAW,EAC7BJ,gBAAgBI,UAAW,EAC3BH,aAAaG,UAAW,EACxBF,eAAeE,UAAW"}