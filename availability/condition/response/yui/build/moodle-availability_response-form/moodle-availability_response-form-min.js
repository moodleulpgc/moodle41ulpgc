YUI.add("moodle-availability_response-form",function(e,t){M.availability_response=M.availability_response||{},M.availability_response.form=e.Object(M.core_availability.plugin),M.availability_response.form.responses=null,M.availability_response.form.initInner=function(e){this.choiceInstances=e},M.availability_response.form.getNode=function(t){var n='<span class="availability-group"><label>'+M.util.get_string("conditiontitle","availability_response")+" "+'<select name="field">'+'<option value="choose">'+M.util.get_string("choosedots","moodle")+"</option>",r;for(var i=0;i<this.choiceInstances.length;i++)r=this.choiceInstances[i],n+='<option value="rf_'+r.field+'">'+r.display+"</option>";n+='</select></label> <label><span class="accesshide">'+M.util.get_string("label_operator","availability_response")+' </span><select name="op" title="'+M.util.get_string("label_operator","availability_response")+'">';var s=["isequalto","contains","doesnotcontain","startswith","endswith"];for(i=0;i<s.length;i++)n+='<option value="'+s[i]+'">'+M.util.get_string("op_"+s[i],"availability_response")+"</option>";n+='</select></label> <label><span class="accesshide">'+M.util.get_string("label_value","availability_response")+'</span><input name="value" type="text" style="width: 10em" title="'+M.util.get_string("label_value","availability_response")+'"/></label></span>';var o=e.Node.create("<span>"+n+"</span>");t.rf!==undefined&&o.one("select[name=field] > option[value=rf_"+t.rf+"]")&&o.one("select[name=field]").set("value","rf_"+t.rf),t.op!==undefined&&o.one("select[name=op] > option[value="+t.op+"]")&&o.one("select[name=op]").set("value",t.op),t.v!==undefined&&o.one("input").set("value",t.v);if(!M.availability_response.form.addedEvents){M.availability_response.form.addedEvents=!0;var u=function(e){var t=e.ancestor("span.availability_response"),n=t.one("select[name=op]"),r=n.get("value")==="isempty"||n.get("value")==="isnotempty";t.one("input[name=value]").set("disabled",r),M.core_availability.form.update()},a=e.one("#fitem_id_availabilityconditionsjson");a.delegate("change",function(){u(this)},".availability_response select"),a.delegate("change",function(){u(this)},".availability_response input[name=value]")}return o},M.availability_response.form.fillValue=function(e,t){var n=t.one("select[name=field]").get("value");n.substr(0,3)==="rf_"&&(e.rf=n.substr(3)),e.op=t.one("select[name=op]").get("value");var r=t.one("input[name=value]");r.get("disabled")||(e.v=r.get("value"))},M.availability_response.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),n.rf===undefined&&e.push("availability_response:error_selectfield"),n.v!==undefined&&/^\s*$/.test(n.v)&&e.push("availability_response:error_setvalue")}},"@VERSION@",{requires:["base","node","event","io","moodle-core_availability-form"]});
