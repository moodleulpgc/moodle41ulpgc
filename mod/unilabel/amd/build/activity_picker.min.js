define("mod_unilabel/activity_picker",["exports","jquery","core/log"],(function(_exports,_jquery,_log){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_log=_interopRequireDefault(_log);var _systemImportTransformerGlobalIdentifier="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_exports.init=async formid=>{let currentinput,maybeactivityelement,modalid="unilabel-modal-activity-picker-"+formid;const str=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core/str"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core/str")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core/str"])),deletestr=await str.get_string("delete"),inputswitcher=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["mod_unilabel/activity_picker_input_switcher"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("mod_unilabel/activity_picker_input_switcher")):Promise.resolve(_systemImportTransformerGlobalIdentifier["mod_unilabel/activity_picker_input_switcher"]));(0,_jquery.default)("#"+modalid).on("show.bs.modal",(function(){(0,_jquery.default)("#"+modalid).appendTo("body"),currentinput=document.querySelector("#"+document.querySelector("#"+modalid).dataset.inputid),maybeactivityelement=currentinput.parentElement.querySelector("div.activitytitle.unilabel-input-replacement")})),document.querySelector("#unilabel-activity-picker").addEventListener("click",(e=>{if(e.target.classList.contains("activity-picker-link")&&(e.preventDefault(),e.stopPropagation(),maybeactivityelement&&(_log.default.debug("There already is an replacement element. It must be remove before a new one is added."),maybeactivityelement.remove()),(0,_jquery.default)("#unilabel-modal-activity-picker-"+formid).modal("hide"),e.target.classList.contains("activity-picker-link"))){let url=e.target.href,activitylinksrc=e.target.closest(".activitytitle");inputswitcher.switchInput(currentinput,activitylinksrc,url,!0,deletestr)}})),(0,_jquery.default)("#search-"+formid).on("keyup",(function(){let value=(0,_jquery.default)(this).val().toLowerCase();(0,_jquery.default)("#unilabel-activity-picker-list li").filter(((index,element)=>(element.dataset.filterstring.toLowerCase().indexOf(value)>-1?(0,_jquery.default)(element).slideDown():(0,_jquery.default)(element).slideUp(),index)))}))}}));

//# sourceMappingURL=activity_picker.min.js.map