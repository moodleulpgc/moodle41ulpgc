{"version":3,"file":"activity_picker.min.js","sources":["../src/activity_picker.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * unilabel helper for activity picker\n *\n * @author      Andreas Grabs <info@grabs-edv.de>\n * @copyright   2018 onwards Grabs EDV {@link https://www.grabs-edv.de}\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    return {\n        'init': function(formid) {\n            var currentinput;\n            $('#unilabel-modal-activity-picker-' + formid).on('show.bs.modal', function() {\n                $('#unilabel-modal-activity-picker-' + formid).appendTo('body');\n                currentinput = $('#unilabel-modal-activity-picker-' + formid).attr('data-inputid');\n            });\n            $('.activity-picker-link').on('click', function(event) {\n                event.stopPropagation();\n                event.preventDefault();\n                $('#unilabel-modal-activity-picker-' + formid).modal('hide');\n                var url = $(this).attr('href');\n                // To make the form aware of the change, we set the data-initial-value to its original value.\n                $('#' + currentinput).attr('data-initial-value', $('#' + currentinput).val());\n                $('#' + currentinput).val(url); // Set the url into the input field.\n                $('#' + currentinput).select(); // Select the the input field.\n            });\n\n            $(\"#search-\" + formid).on(\"keyup\", function() {\n                var value = $(this).val().toLowerCase();\n                $(\"#unilabel-activity-picker-list li\").filter((index, element) => {\n                    // Looking for data-filterstring we can apply the search term.\n                    if (element.dataset.filterstring.toLowerCase().indexOf(value) > -1) {\n                        $(element).slideDown();\n                    } else {\n                        $(element).slideUp();\n                    }\n                    return index;\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","formid","currentinput","on","appendTo","attr","event","stopPropagation","preventDefault","modal","url","this","val","select","value","toLowerCase","filter","index","element","dataset","filterstring","indexOf","slideDown","slideUp"],"mappings":";;;;;;;AAuBAA,sCAAO,CAAC,WAAW,SAASC,SACjB,MACK,SAASC,YACTC,aACJF,EAAE,mCAAqCC,QAAQE,GAAG,iBAAiB,WAC/DH,EAAE,mCAAqCC,QAAQG,SAAS,QACxDF,aAAeF,EAAE,mCAAqCC,QAAQI,KAAK,mBAEvEL,EAAE,yBAAyBG,GAAG,SAAS,SAASG,OAC5CA,MAAMC,kBACND,MAAME,iBACNR,EAAE,mCAAqCC,QAAQQ,MAAM,YACjDC,IAAMV,EAAEW,MAAMN,KAAK,QAEvBL,EAAE,IAAME,cAAcG,KAAK,qBAAsBL,EAAE,IAAME,cAAcU,OACvEZ,EAAE,IAAME,cAAcU,IAAIF,KAC1BV,EAAE,IAAME,cAAcW,YAG1Bb,EAAE,WAAaC,QAAQE,GAAG,SAAS,eAC3BW,MAAQd,EAAEW,MAAMC,MAAMG,cAC1Bf,EAAE,qCAAqCgB,QAAO,CAACC,MAAOC,WAE9CA,QAAQC,QAAQC,aAAaL,cAAcM,QAAQP,QAAU,EAC7Dd,EAAEkB,SAASI,YAEXtB,EAAEkB,SAASK,UAERN"}